<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="IMPROTBASEDATA">
    <select id="queryPtpByLabelcnNeCuid"  parameterClass="java.util.HashMap" resultClass="com.boco.core.ibatis.vo.ResultMap">	
	  SELECT * FROM PTP WHERE LABEL_CN=#LABEL_CN# AND RELATED_NE_CUID=#RELATED_NE_CUID#
    </select>
	<!--查询到所有机盘类型的CARDKIND_NAME和厂商的LABEL_CN-->
    <select id="queryCardKind" resultClass="com.boco.core.ibatis.vo.ResultMap">	
	  SELECT C.CARDTYPE_NAME,D.LABEL_CN 
	  FROM CARD_KIND C,DEVICE_VENDOR D WHERE C.RELATED_VENDOR_CUID=D.CUID 
    </select>

    <!-- 根据厂家名称,网元型号名称,网元类型查询网元型号CUID -->
    <select id="queryNeModelCuid" parameterClass="java.util.HashMap" resultClass="com.boco.core.ibatis.vo.ResultMap">	
	  SELECT A.CUID 
	  	FROM NE_MODEL_CFG_TYPE A , DEVICE_VENDOR B 
	  WHERE A.VENDOR_NAME = B.CUID 
		  AND B.LABEL_CN = #VENDOR_NAME#
		  AND A.PRODUCT_MODEL = #PRODUCT_MODEL# 
		  AND A.SIGNAL_TYPE = #SIGNAL_TYPE# 
		  AND A.CFG_TYPE = #CFG_TYPE#
    </select>

    <!--查询到所有网元的PRODUCT_MODEL和厂商的LABEL_CN-->
    <select id="queryNeModel" resultClass="com.boco.core.ibatis.vo.ResultMap">	
	  SELECT N.PRODUCT_MODEL,D.LABEL_CN 
	  FROM NE_MODEL_CFG_TYPE N,DEVICE_VENDOR D WHERE N.VENDOR_NAME=D.CUID
    </select>
    
    <!--添加网元型号信息-->
    <insert id="insertNeModel" parameterClass="java.util.HashMap">
       INSERT INTO 
       NE_MODEL_CFG_TYPE 
       (OBJECTID,GT_VERSION,VENDOR_NAME,
       CFG_TYPE,PRODUCT_MODEL,MAX_RATE,SIGNAL_TYPE,CUID,
       ISDELETE,CREATE_TIME,LAST_MODIFY_TIME) 
       VALUES(
       #OBJECTID#,
       #GT_VERSION#,
       (SELECT LABEL_CN FROM DEVICE_VENDOR WHERE LABEL_CN = #VENDOR_NAME#),       
       #CFG_TYPE#,
       #PRODUCT_MODEL#,
       #MAX_RATE#,
       #SIGNAL_TYPE#,
       #CUID#,
       #ISDELETE#,
       #CREATE_TIME#,
       #LAST_MODIFY_TIME#
       )
    </insert>
    
	<!--添加网元型号信息-->
    <insert id="insertNeModelInfo" parameterClass="java.util.HashMap">
       INSERT INTO 
       NE_MODEL_CFG_TYPE 
       (OBJECTID,GT_VERSION,VENDOR_NAME,
       CFG_TYPE,PRODUCT_MODEL,MAX_RATE,SIGNAL_TYPE,CUID,
       ISDELETE,CREATE_TIME,LAST_MODIFY_TIME) 
       VALUES(
       #OBJECTID#,
       #GT_VERSION#,
       #VENDOR_NAME#,       
       #CFG_TYPE#,
       #PRODUCT_MODEL#,
       #MAX_RATE#,
       #SIGNAL_TYPE#,
       #CUID#,
       #ISDELETE#,
       #CREATE_TIME#,
       #LAST_MODIFY_TIME#
       )
    </insert>
	<select id="queryCoverageByNeCuid" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT * FROM t_attemp_GPON_COVER WHERE  RELATED_NE_CUID IN 
          <iterate  conjunction="," open="(" close=")">
				#related_ne_cuid[]#
		</iterate>			
	</select>
	<select id="queryCustomerByName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT * FROM T_ROFH_CUSTOMER WHERE  LABEL_CN IN 
          <iterate  conjunction="," open="(" close=")">
				#label_cn[]#
		</iterate>			
	</select>
	<select id="queryOltName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT * FROM TRANS_ELEMENT WHERE  LABEL_CN IN 
          <iterate  conjunction="," open="(" close=")">
				#name[]#
		</iterate>			
	</select>
	<select id="queryOltPosName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT CUID,LABEL_CN,FDN,RELATED_EMS_CUID,'1' AS DEV_TYPE FROM TRANS_ELEMENT WHERE  LABEL_CN IN 
          <iterate  conjunction="," open="(" close=")">
				#name[]#
		</iterate>
		UNION 
		SELECT P.CUID,P.LABEL_CN,T.FDN,P.RELATED_EMS_CUID,'3' AS DEV_TYPE FROM AN_POS P,TRANS_ELEMENT T WHERE T.CUID=P.RELATED_OLT_CUID AND P.LABEL_CN IN 
        <iterate  conjunction="," open="(" close=")">
				#name[]#
		</iterate>			
	</select>
	<select id="queryRelatedOltPortName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT CUID,LABEL_CN FROM PTP WHERE  LABEL_CN IN 
          <iterate  conjunction="," open="(" close=")">
				#name[]#
		</iterate>
	</select>
	<select id="queryPosName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">

		SELECT CUID,LABEL_CN,RELATED_OLT_CUID,FDN,DEV_CUID,RELATED_VENDOR_CUID,OWNERSHIP,'1' AS POSTYPE 
		FROM t_attemp_AN_POS 
		WHERE  LABEL_CN IN  
        <iterate conjunction="," open="(" close=")">
				#name[]#
		</iterate>
	</select>	
	<select id="queryOnuName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT *   
		FROM t_attemp_AN_ONU 
		WHERE  LABEL_CN IN 
          <iterate conjunction="," open="(" close=")">            
				#name[]#
		</iterate>			
	</select>

	
	<select id="queryCardName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT LABEL_CN,CUID ,FDN ,RELATED_DEVICE_CUID,MODEL,RELATED_UPPER_COMPONENT_CUID FROM t_attemp_CARD WHERE  LABEL_CN IN 
          <iterate conjunction="," open="(" close=")">
				#name[]#
		</iterate>			
	</select>
	<select id="queryPtpName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT LABEL_CN,CUID ,FDN ,PORT_NO   ,PORT_RATE,PORT_TYPE,VLAN, REMARK FROM t_attemp_PTP WHERE  LABEL_CN IN 
          <iterate conjunction="," open="(" close=")">
				#name[]#
		</iterate>			
	</select>
	<select id="queryNeByName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT  
	    	LABEL_CN,CUID,FDN,'AN_OLT-' AS DEV_CUID FROM  TRANS_ELEMENT T WHERE T.LABEL_CN	IN
	    	 <iterate conjunction="," open="(" close=")">
				#name[]#
			</iterate>
		UNION SELECT 
		    LABEL_CN,CUID,FDN,DEV_CUID FROM  AN_ONU A WHERE A.LABEL_CN IN
		     <iterate conjunction="," open="(" close=")">
				#name[]#
			</iterate>
		UNION SELECT 
	    	LABEL_CN , CUID,  FDN,DEV_CUID FROM AN_POS S WHERE S.LABEL_CN IN		
          <iterate conjunction="," open="(" close=")">
				#name[]#
		  </iterate>			
	</select>
	<select id="queryPortByName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">	
		SELECT LABEL_CN,CUID,FDN,RELATED_NE_CUID FROM t_attemp_PTP WHERE LABEL_CN in 
		<iterate conjunction="," open="(" close=")">
				#name[]#
		</iterate>	
	</select>
	<select id="queryAccesspointName" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT LABEL_CN,CUID,DISTRICT_CUID ,SITE_CUID ,LOCATION ,LONGITUDE , LATITUDE ,VP_CONTACT ,
			VP_PHONE  ,MAINTAIN_MAN    ,MAINTAIN_PHONE  
		FROM ACCESSPOINT WHERE LABEL_CN IN 
		<iterate conjunction="," open="(" close=")">
				#name[]#
		</iterate>	
	</select>
	<select id="getProducterAndModelRelated" parameterClass="java.util.HashMap" resultClass="com.boco.core.ibatis.vo.ResultMap">
		 SELECT CUID
		   FROM NE_MODEL_CFG_TYPE
		  WHERE SIGNAL_TYPE = 9
		    AND CFG_TYPE = #CFG_TYPE#
		    AND VENDOR_NAME in (SELECT CUID FROM DEVICE_VENDOR D WHERE D.LABEL_CN = #producter#)
		    AND PRODUCT_MODEL = #model#
	</select>
	<select id="queryDistrictForSite" parameterClass="java.util.List" resultClass="com.boco.core.ibatis.vo.ResultMap">
	
		SELECT LABEL_CN,RELATED_SPACE_CUID FROM SITE WHERE RELATED_SPACE_CUID IN 
		<iterate conjunction="," open="(" close=")">
				#name[]#
		</iterate>	
	</select>	
		<!-- 根据EMS姓名查询Ems的fdn,Cuid等等-->
	<select id="queryEmsName" parameterClass="java.lang.String" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT LABEL_CN,FDN,CUID FROM NMS_SYSTEM  WHERE LABEL_CN = #LABEL_CN#
	</select>
	<!--根据room的name查询机房CUID-->
	<select id="getRelatedRoom" parameterClass="java.lang.String" resultClass="java.lang.String">
		SELECT CUID FROM ROOM R WHERE R.LABEL_CN = #LABEL_CN#
	</select>
	<!--根据rack的name查询CUID-->
	<select id="getRelatedRack" parameterClass="java.lang.String" resultClass="java.lang.String">
		SELECT CUID FROM T_PHY_SHELFRACK_UNIT R WHERE R.LABEL_CN = #LABEL_CN#
	</select>
	<!--根据site的name查询站点CUID-->
	<select id="quertySiteCuidByName" parameterClass="java.lang.String" resultClass="java.lang.String">
		SELECT CUID FROM SITE S WHERE S.LABEL_CN = #LABEL_CN#
	</select>
	<!--根据Room的cuid查询站点CUID-->
	<select id="quertySiteCuidByRoom" parameterClass="java.lang.String" resultClass="java.lang.String">
		SELECT RELATED_SITE_CUID FROM ROOM S WHERE S.CUID = #CUID#
	</select>
	<!--根据district的name查询区域CUID-->
	<select id="quertyDistrictCuidByName" parameterClass="java.lang.String" resultClass="java.lang.String">
		SELECT CUID FROM DISTRICT D WHERE D.LABEL_CN = #LABEL_CN#
	</select>
	<!--根据vendor的name查询厂商CUID-->
	<select id="quertyVendorCuidByName" parameterClass="java.lang.String" resultClass="java.lang.String">
		SELECT CUID FROM DEVICE_VENDOR D WHERE D.LABEL_CN = #LABEL_CN#
	</select>

	

	<select id="queryDistrictBylabelcn" parameterClass="java.lang.String" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT D.CUID,D.LABEL_CN FROM DISTRICT D  WHERE D.LABEL_CN = #LABEL_CN#
	</select>
	<select id="queryMaintainBylabelcn" parameterClass="java.lang.String" resultClass="com.boco.core.ibatis.vo.ResultMap">
		SELECT  S.CUID,S.LABEL_CN  FROM T_EXT_RADIO_MAINTAIN S  WHERE S.LABEL_CN = #LABEL_CN#
	</select>
</sqlMap>